2013.08.16 Fri.

今の solveInfix はまちがっている。
+ < * < ^ という場合に、3 * 5 ^ 2 + 2 がうまくいかない。
今の実装だと、3 * ((5 ^ 2) + 2) となってしまう。
ひとつの案は、「上がって下がる地点を見つけてそこを解決」をくりかえすこと。
しかし、指数関数的な時間がかかりそうな気もする。
もっとちゃんと LR 的に shift reduce について学ぶ必要があるな。

2013.08.17 Sat.

演算子順位法を抽象化して考えてみよう。
shift と reduce というものがある。
shift は単にスタックの一番上に足せば良い。
reduce はスタックの上の3つをひとつにまとめれば良い。
そして、スタックの2番目と src の top を比較する関数があれば良い。

2013.08.19 Mon.

僕の実装だと変数は局所変数と大域変数の2つだけ。
つまり Bool 値をつければ良いわけだ。
PIdentifier Bool Int とすれば良いか。
しかし、速度を考えるならば、あまり変わらないかな。
ただ、String の比較よりも Int の比較のほうが速いということはあるか。
たとえば、State ([(String, Int)], [(String, Int)]) とするとか。
