YieldがHFunctorのインスタンスにならない話について。

YieldをHfunctorのインスタンにしたい理由は(o =$=!)をつけたいから。
で、(o =$=!)はiは変化させてもoは変化させない。
ので、oを変化させないHFunctorのバリエーションを使えばいいのかもしれない。
とすると、HFunctorを4つに分けることが考えられる。
つまりi, oのそれぞれについて「変化が必要」なものと「変化させない」ものだ。
一度それでやってみよう。

AwaitをHFunctorのインスタンスにしたい理由は(=$=! p)をつけたいから。
で、(=$=! p)はoを変化させてもiは変化させない。

どちらも「変化させない」ものは不要かもしれない。

instanceを定義する側では、より強い制約として「どちらも変化させる」を選ぶ方向で、
mapを使う側では、より弱い制約として「どちらも変化させない」を選ぶ方向がいいのかもしれない。

2025-04-30 Wed.

(m (t r), m' (t r'))

k :: (m r, m' r') -> a

g :: x -> t x

tight
loose
