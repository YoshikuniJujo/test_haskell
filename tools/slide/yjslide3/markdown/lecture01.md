第1回 関数
==========

はじめに
--------

Haskellでプログラミングをするということは、
関数を様々なやりかたで組み合わせるということだ。
関数の定義のしかた、関数へ引数を与えるやりかた、
関数の部分適用について見ていこう。

また、関数のリテラル表記についても見る。
高階関数について学び、また、演算子と関数が同じものであることも学ぶ。

便利な演算子(.)と($)も紹介しよう。

関数定義と適用
--------------

### 関数の定義

C言語では以下のようにする。

    init add (int x, int y) { return x + y; }

同じことをHaskellでは以下のようにする。

    add x y = x + y

[関数名] [仮引数1] [仮引数2] ... = [表現]という形となる。
'='を使っているのは、
「add x yはx + yに置き換えられる」ということを示している。
例えば、プログラム中でadd 3 8とあれば、それは3 + 8に置き換えられるということ。

### 関数の適用

関数addに実引数3, 8を与えるには以下のようにする。

    add 3 8

[関数名] [実引数1] [実引数2] ...という形となる。
add (3, 8)のようにはしない。
関数名のあとに空白でくぎった実引数を並べれば良い。
この記法の合理性は講義が進むにつれて明らかになる。

### やってみよう

ghciの対話環境内でも関数定義は可能。
しかし、関数が長くなってくると大変なので、
別ファイルで関数を定義して、
対話環境でそれを読み込んで使うことにしよう。

メモ帳、Vim、Emacsのうち好きなエディタを選ぼう
(Vimはできるかぎり用意したい。Emacsも用意できたらいいのだが)。
以下のようにフォルダを作成しよう。

    % cd ~ (Linux)
    % cd %userprofile% (Windows)
    % mkdir lectures/lecture01
    % cd lectures/lecture01

例題として以下の関数を作ろう。
「身長と体重を入力するとBMIを返す」関数bmi。
BMIは以下の式で計算できる。

    BMI = [体重(kb)] / [身長(m)の2乗]

以下のコマンドでbmi.hsファイルを作ろう。

    % [エディタ] bmi.hs

[エディタ]はnotepad, vim, emacsのどれかとなる。
また、[エディタ]を開くのに使ったコマンドプロンプト以外に、
もうひとつプロンプトを開いておくと後々便利。

bmi.hsに以下の内容を書き込もう。

    bmi h w = w / (h / 100) ^ 2

ghciにこのファイルを読み込ませる。

    % ghci bmi.hs
    *Main>

プロンプトの内容が"Prelude"ではなく"*Main"になった。
この意味は後々明らかになる。

とりあえず、チェ・ホンマンのBMIを求めてみよう。

    *Main> bmi 218 164
    34.508879723928956

### まとめ

* 関数とは引数を取り返り値を返すもの
* Haskellでは以下のように定義する
    - [関数名] [仮引数1] [仮引数2] ... = [表現]
* 関数fに値xを与えることをxにfを適用する、という
* 関数適用は以下のようにする
    - [関数名] [実引数1] [実引数2]
