第19回 mainと演習
=================

はじめに
--------

モジュール宣言をつけないときのデフォルトのモジュールは
Mainとなる。
そのMainモジュールのなかでmainという値を定義すると、
そのmainという値は特別な意味を持つ。

今までは対話環境のなかで様々な値を評価してきた。
スタンドアロンなプログラムはまだ見ていない。
スタンドアロンなプログラムを作るうえで重要になるのが
Mainモジュールのmainという値である。

mainの型
--------

スタンドアロンなプログラムとは入出力を行う機械である。
その機械を定義するのがmainという値である。
「Haskellで書かれたプログラムを動かす」ということは
「mainという名前を束縛する機械を『実行』する」ということ。

プログラムは完全に組み立てられた機械である必要がある。
つまり「他の機械から渡される値も、他の機械に渡す値もない」ということ。
よってmainの型は以下のようになる。

    main :: IO ()

Hello, world!
-------------

ghcによるコンパイルは簡単である。

    % ghc [名前].hs

ここまで学んできてようやく世界に挨拶ができる。
lectures/lecture19ディレクトリを作成し、
以下の内容でhello.hsを作ろう。

    main :: IO ()
    main = putStrLn "Hello, world!"

コンパイル、実行。

    % ghc hello.hs
    % ./hello
    Hello, world!

Hello, you!
-----------

### 入力をそのまま出力

入力した名前に対して挨拶するプログラムを作っていく。
まずは入力をそのまま出力する。

* 演習19-1. 入力した行をそのまま表示するプログラムを書け(1分)
* 演習19-2. これをdo記法で書き直せ(1分)

### 質問する

* 演習19-3. 入力の前に"What's your name?"を表示せよ(1分)

### 挨拶する

上記に加え以下の動作を追加する。

* 演習19-4. 入力行の前後に"Hello, "と"!"をつけて表示せよ(1分)

### 場合分け

* 演習19-5. 入力行が空だったら何も表示しないようにせよ(1分)

### くりかえし

* 演習19-6. 「名前を尋ねて挨拶」をくりかえせ(2分)

空文字列が入力されたら終了とする。

まとめ
------

スタンドアロンなプログラムの作りかたを見た。
Mainモジュールのmainの値を定義してやれば良い。
mainは「完成した機械」つまり
「何も渡されず、何も渡さない機械」なので

    main :: IO ()

また、文字列の入出力について演習問題を解いた。
再帰的な定義による「くりかえし」を見た。
